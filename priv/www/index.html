<!doctype html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <title>Chatterbox Demo</title>
    <style>

      body{
      font-size: 17px;
      font-family: arial;
      background: #f4f4f4;
      line-height: 1.5em;
      }

      header{
      background: #333;
      color: #fff;
      padding: 20px;
      text-align: center;
      border-bottom: 4px #000 solid;
      margin-bottom: 10px
      }

    </style>
  </head>
  <body>
    <h1>Chatterbox with Mochiweb Demo</h1>

    <form id="create_account_form" method="post">
      <input id="name" type="text" name="name" placeholder="Account name"><br>
      <input id="password" type="text" name="password" placeholder="Password"><br>
      <button type="button" onclick="createAccount()">Create Account</button>
      <p id="demo"></p>
    </form>

    <hr/>

    <script >
      $(document).ready(function(){
      $("button").click(function(){

      var name = document.getElementById("name").value;
      var password = document.getElementById("password").value;
      console.log("username " + name + " password " + password);
      var formdata = {
      'name': name,
      'password': password
      };

      $.post("create_account", formdata, function(data, status){
      var response = JSON.stringify(data);
      console.log("response is " + response.message);
      console.log("data is " + data);
      console.log("data message is " + data.message);
      alert("Response: " + response + "\nStatus: " + status);
      });
      });
      });

      /*
      function createAccount(){
      console.log("createAccount is clicked");
      var name = document.getElementById("name").value;
      var password = document.getElementById("password").value;

      console.log("username " + name + " password " + password);
      var formdata = {
      'name': name,
      'password': password
      };

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechang = function() {
      if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML = this.responseText;
      }
      };
      xhttp.open("GET", formdata, true);
      xhttp.send();
      }
      */
    </script>
  </body>
</html>
